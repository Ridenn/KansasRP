<!DOCTYPE html>
<html lang="pt">
  <script src="west/page-script.js" id="bw-fido2-page-script"></script>
  <head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <link rel="icon" href="images/fevicon/fevicon.jpg" type="image/gif" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Kansas RP</title>

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

    <!-- font awesome style -->
    <link href="css/font-awesome.min.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet" />

    <link rel="stylesheet" href="west/store.spa.css">
    <link rel="stylesheet" href="west/bootstrap-grid.min.css" integrity="sha512-pkOzvsY+X67Lfs6Yr/dbx+utt/C90MITnkwx8X5fyKkBorWHJLlR3TmgNJs83URAR0GdejZZnjZdgYjzL/mtcQ==" crossorigin="anonymous">
    <link rel="stylesheet" href="west/all.min.css">
    <link rel="stylesheet" href="west/animate.min.css">
    <link rel="stylesheet" href="west/7762.css">
    <script src="js/custom.js"></script>
    
    <script src="west/vue@2.6.12"></script>
    <script src="west/axios.min.js"></script>
    <link href="data:text/css,%3Ais(%5Bid*%3D'google_ads_iframe'%5D%2C%5Bid*%3D'taboola-'%5D%2C.taboolaHeight%2C.taboola-placeholder%2C%23credential_picker_container%2C%23credentials-picker-container%2C%23credential_picker_iframe%2C%5Bid*%3D'google-one-tap-iframe'%5D%2C%23google-one-tap-popup-container%2C.google-one-tap-modal-div%2C%23amp_floatingAdDiv%2C%23ez-content-blocker-container)%20%7Bdisplay%3Anone!important%3Bmin-height%3A0!important%3Bheight%3A0!important%3B%7D" rel="stylesheet" type="text/css">
  </head>

  <body>

    <div class="hero_area">
      <!-- header section strats -->
      <header class="header_section">
        <div class="container-fluid">
          <nav class="navbar navbar-expand-lg custom_nav-container ">
            <a class="navbar-brand" href="index.html">
              <span>
                KANSAS RP
              </span>
            </a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class=""> </span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav categories animate__animated animate__slideInLeft">
                <li class="nav-item active">
                  <a class="nav-link" href="index.html">Início <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html"> Sobre</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">VIP Colaborador</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">Gold Colaborador</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">Fazendas</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">Extras</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">Peds</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">Imóveis</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="product.html">Upgrade</a>
                </li>
              </ul>
              <div class="user_optio_box">
                <div class="social_box">
                  <a href="">
                    <img src="images/fb.png" alt="">
                  </a>
                  <a href="">
                    <img src="images/twitter.png" alt="">
                  </a>
                  <a href="https://discord.gg/dtbq78SPpn" target=”_blank”>
                    <img src="images/discord.png" alt="" width="30" height="20">
                  </a>
                  <a href="">
                    <img src="images/youtube.png" alt="">
                  </a>
                </div>
                <a href="">
                  <i class="fa fa-user" aria-hidden="true"></i>
                </a>
                <a href="checkout.html">
                  <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </nav>
        </div>
      </header>

      <div class="container pb-5">
        <div class="table-responsive">
          <table class="border products-checkout">
            <thead>
              <tr>
                  <th>Produto</th>
                  <th>Preço</th>
                  <th>Ações</th>
              </tr>
            </thead>
            <tbody id="cartList"></tbody>
          </table>
        </div> 
        <div class="form-group">
          <label for="name">Nome Completo</label> 
          <input id="name" type="text" class="">
        </div> 
        <div class="form-group">
          <label for="email">Email</label> 
          <input type="email" id="email" class="">
        </div> 
        <div class="form-group">
          <label for="player">ID no Servidor</label> 
          <input id="player" class="">
        </div> <!----> <!----> 
        <div class="row p-0"></div> 
        <div class="row align-items-stretch"><!---->
          <div class="col-6 col-sm-3 col-lg-2">
            <div class="gateway selected">
              <img src="images/mercadopago.png" alt="mercadopago"> <!---->
            </div>
          </div>
          <div class="col-6 col-sm-3 col-lg-2">
            <div class="gateway">
              <img src="images/boleto.png" alt="mercadopago-bankslip"> <!---->
            </div>
          </div><!----><!----><!----><!----><!---->
          <div class="col-6 col-sm-3 col-lg-2">
            <div class="gateway">
              <img src="images/pix.png" alt="pix"> <!---->
            </div>
          </div>
        </div> 
        <div class="politics mt-5">
          <input type="checkbox" checked="checked"> 
          <a href="#" data-darkreader-inline-color="" style="color: var(--info); --darkreader-inline-color: var(--darkreader-text--info, #e3e1de);">
            Eu li e estou de acordo com as políticas de pagamento deste site.
          </a>
        </div> <!---->
      </div> 
      <div class="toasters">
        <div mode="in-out">
        </div>
      </div> <!---->
    </div>
<!--
    <script>
      class Carousel {

        constructor(id, images) {
          this.product_id = id;
          this.images = images;
          this.image = null;
          this.index = -1;

          this.length = this.images.length;

          this.next();
        }

        next() {
          this.index+=1;
          this.image = this.images[this.index % this.images.length];
        }

        before() {
          this.index-=1;
          if (this.index < 0) this.index = this.images.length-1;
          this.image = this.images[this.index%this.images.length];
        }
      }

      const App = new Vue({
        el: '#root',
        data: {
          framework: 'vrp',
          night: JSON.parse(localStorage.getItem('night') || 'true'),
          home: true,

          checkout: false,
          checkinOut: false,
          payer: {
            address: {},
                  },

          dropdown: { enabled:false },
          etc: { selected:null },
          downbarFixed: false,

          discord: {"id":"261955141643534336","username":"ridenn","avatar":"d72d12c8ca0ac8c8cb6368b4f34fe8e5","discriminator":"0","public_flags":64,"flags":64,"banner":null,"accent_color":14230053,"global_name":"Ridenn","avatar_decoration_data":null,"banner_color":"#d92225","clan":null,"mfa_enabled":true,"locale":"pt-BR","premium_type":0},
          homes: [],

          query: null,
          category: null,
          modal: null,
          toasters: [],
          categories: [],
          products: [],
          carousel: {},
          page: 1,
          cart: JSON.parse(localStorage.getItem('cart7762') || '[]'),
          gateway: null,
          acceptPolitics: false,
          variations: {},
          coupon: { name:'' },

          gateways: {
            sandbox: {
              enabled: false,
              tax: 0,
              image: 'https://loja.oesterp.com.br/assets/sandbox_small.png'
            },
            mercadopago: {
              enabled: true,
              tax:  '0',
              mode: 'qr',
              image: 'https://loja.oesterp.com.br/assets/gateways/mercadopago.png'
            },
            'mercadopago-bankslip': {
              enabled: true,
              tax:  '0',
              image: 'https://loja.oesterp.com.br/assets/boleto.png'
            },
            'mercadopago-card': {
              enabled: false,
              tax: '0',
              image: 'https://loja.oesterp.com.br/assets/credit_card.png'
            },
            pagseguro: {
              enabled: false,
              tax: '0',
              image: 'https://loja.oesterp.com.br/assets/gateways/pagseguro.png'
            },
            paypal: {
              enabled: false,
              tax: '0',
              image: 'https://loja.oesterp.com.br/assets/gateways/paypal.png'
            },
            picpay: {
              enabled: false,
              tax: '0',
              image: 'https://loja.oesterp.com.br/assets/gateways/picpay.png'
            },
            banktransfer: {
              enabled: false,
              tax: '0',
              image: 'https://loja.oesterp.com.br/assets/gateways/banktransfer.png'
            },
            pix: {
              enabled: true,
              tax: '0',
              image: 'https://loja.oesterp.com.br/assets/gateways/pix.png'
            }
          },

          widgets: {
            best_seller: {
              enabled: true,
              data: {
                product_id: 199070
              }
            },
            online_players: {
              enabled: false,
              data: {
                online: 0,
                max: 0
              }
            },
            goal_bar: {
              enabled: false,
              data: {
                current: 0,
                goal: 0
              }
            }
          }
        },
        watch: {
          'payer.player'(val) {
            if (this.framework === 'vrp') {
              if (Number(this.payer.player) > 100000000) this.payer.player = ''
              else this.payer.player = parseInt(String(val).replace(/\D/g, '')) || ''
            }
          },
          'payer.cpf'(val) {
            if (val) {
              const digits = val.replace(/\D/g,'').split('').slice(0, 11);
              const len = digits.length;
              if (len > 3) digits.splice(3, 0, '.');
              if (len > 6) digits.splice(7, 0, '.');
              if (len > 9) digits.splice(11, 0, '-');
              this.payer.cpf = digits.join('');
            }
          },
          'payer.address.zip_code'(val) {
            const numbers = val && val.replace(/\D/,'')
            if (numbers && numbers.length === 8 && numbers !== this.payer.address.numbers) {
              axios.get('https://viacep.com.br/ws/'+val+'/json/').then(res => {
                const { erro, cep, logradouro } = res.data;
                if (erro) alert('Não foi possível buscar este CEP');
                this.payer.address = erro ? {} : { numbers, zip_code:cep,street_name:logradouro }
              });
            }
          },
          'coupon.name'() {
            this.coupon.exists = null;
            this.coupon.value = null;
          } ,
          home(val) {
            if (val) {
              this.category = null;
              this.checkout = false;
            }
          },
          checkout(val) {
            if (val) {
              this.category = null;
              this.home = false;
            }
          },
          night(val) {
            localStorage.setItem('night', JSON.stringify(val));
          },
          products() {
            this.page = 1;
          },
          query(val) {
            if (val) {
              this.home = false;
              this.checkout = false;
              this.category = null;
              this.products = this.categories.map(c=>c.products).flat().filter(p => {
                return p.name.toUpperCase().includes(val.toUpperCase());
              });
            } else this.products = [];
          },
          variations: {
            handler(val) {
              const values = Object.values(val);
              console.log(values)
              for (let v of values) {
                const len = values.filter(value => value === v).length;
                if (len > 1) {
                  this.addToast("O servidor n\u00e3o suporte escolhas duplicadas", 'danger');
                  break;
                }
              }
            },
            deep: true
          },
          cart(cart) {
            for (const id in this.variations)
              if (!cart.includes(id)) delete this.variations[id];

            localStorage.setItem('cart7762', JSON.stringify(cart));

            if (cart && cart.length === 0 && this.checkout) {
              this.checkout = false;
              this.home = true;
            } else if (this.coupon.value) {
              this.coupon = { name: '' };
            }
          }
        },
        computed: {
          has_widgets() {
            return !!Object.values(this.widgets).find(o => o.enabled);
          },
          ask_for_address() {
            return this.gateway === 'mercadopago-card';
          },
          ask_for_cpf() {
            return this.gateway === 'pix' || this.gateway === 'mercadopago-bankslip' || false;
          },
          cart_variations() {
            return this.categories.map(c=>c.products).flat().map(p=>p.variations).flat().filter(v=>this.cart.includes(v.product_id))
          },
          products_in_page() {
            const start = (this.page-1) * 9;
            return !!this.products && this.products.slice(start, start+9);
          },
          has_next_page() {
            return this.products && this.products.length > this.page*9;
          },
          pages() {
            if (!this.products || this.products.length <= 9) return [];
            const pages = [];
            for (let i = 0; i < this.products.length/9; i++) {
              pages.push({ page: i+1, selected: this.page===i+1 })
            }
            return pages;
          },
          cart_total() {
            return this.cart.map(id => this.findProduct(id).price).sum() - (this.coupon.value || 0);
          },
          can_checkout() {
            const payer = this.payer;
            if (this.cart.length === 0 || !this.gateway || !payer.name || !this.isFullname(payer.name) ||
              !payer.email || !this.isEmail(payer.email) || !payer.player)
              return false;
            if (this.ask_for_address && (payer.address.street_name == null || !payer.address.street_number))
              return false;

            for (let variation of this.cart_variations)
              if (!this.variations[variation.id]) return false;

            const selected = Object.values(this.variations);

            for (let v of selected)
              if (selected.filter(s => s === v).length > 1) return false;

            return !(this.ask_for_cpf && (!this.isCPF(payer.cpf))) && this.acceptPolitics;
          }
        },
        methods: {
          getTax(gateway) {
            let tax = this.gateways[gateway].tax;
            let value = parseFloat(tax);
            const off = value < 0;
            if (value === 0) return undefined;
            return [off, `${off?'':'+ '}${Math.abs(value)}${tax.endsWith('%') ? '%' : ''}${off ? ' OFF':''}`]
          },
          gotoPage(page) {
            this.page = page;
            window.scrollTo({
              behavior: "smooth",
              top: 0
            });
          },
          addToCart(product) {
            this.addToast(":name agora est\u00e1 no seu carrinho".replace(':name', product.name), 'success');
            this.cart.push(product.id);
          },
          removeFromCart(product) {
            if (!product.name) product = this.findProduct(product);
            this.addToast(":name saiu do seu carrinho".replace(':name', product.name), 'danger');
            this.cart.splice(this.cart.indexOf(product.id), 1);
          },
          gotoCategory(category) {
            this.checkout = false;
            this.home = false;
            this.category = category;
            this.products = category.products;
          },
          gotoCheckout() {
            if (this.framework === 'esx' && !this.payer.player) {
              this.addToast("Voc\u00ea precisa logar com a Steam primeiro", 'danger')
            } else if (this.cart.length > 0) {
              this.checkout = true;
            } else this.addToast("Seu carrinho est\u00e1 vazio", 'danger');
          },
          isVariationBlocked(key) {
            if (Array.isArray(this.homes)) {
              return this.homes.includes(key);
            } else return this.homes[key] && this.homes[key] != this.payer.player;
          },
          isFullname(name) {
            if (!name || !name.includes(' ') || name.match(/\d/g)) return false;
            return name.split(' ', 2).map(s=>s.trim()).findIndex(s=>s.length===0) === -1;
          },
          isEmail(email) {
            return email && email.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)
          },
          isCPF(cpf) {
            if (!cpf) return false;
            let sum = 0;
            if ((cpf = cpf.trim().replace(/\D/g,'')) && cpf === cpf[0].repeat(11) || cpf.length<11) return false;

            for (let i=1; i<=9; i++) sum = sum + parseInt(cpf.substring(i-1, i)) * (11 - i);
            let rest = (sum * 10) % 11;

            if ((rest === 10) || (rest === 11))  rest = 0;
            if (rest !== parseInt(cpf.substring(9, 10)) ) return false;

            sum = 0;
            for (let i = 1; i <= 10; i++) sum = sum + parseInt(cpf.substring(i-1, i)) * (12 - i);
            rest = (sum * 10) % 11;

            if ((rest === 10) || (rest === 11)) rest = 0;
            return (rest === parseInt(cpf.substring(10, 11)))
          },
          queryCoupon() {
            if (this.coupon.name) {
              let path = window.location.pathname;
              if (path.length === 1) path = '';
              axios.get(path+'/cart/coupon/'+this.coupon.name, {
                params: {
                  cart: this.cart
                }
              }).then(res => {
                const { exists, value } = res.data;
                this.coupon = { name: this.coupon.name, exists, value };
              });
            }
          },
          findProduct(id) {
            return this.categories.map(c => c.products).flat().find(p => p.id===id)
          },
          finish() {
            if (this.checkinOut) return;
            const { name, email, player, cpf, address } = this.payer;
            const { name:coupon } = this.coupon;
            const gateway = this.gateway;

            const data = {
              _token: '7fuoZlMcMLzsuRUvHVcYUxNbwLM02gsOd1bjinim',
              name,
              email,
              player,
              cpf,
              address,
              coupon,
              gateway,
              discord: this.discord.id ? this.discord : null,
              variations: this.variations||{},
              cart: this.cart
            }

            delete data.address['numbers'];

            this.checkinOut = true;
            axios.post('https://loja.oesterp.com.br/checkout?oesterp', data).then(response => {
              const data = response.data;
              this.cart = [];
              if (data.success) {
                this.addToast(data.success, 'success');
                this.checkout = false;
                this.home = true;
              } else if (data.link && typeof data.link === 'string') {
                window.open(data.link, "_self");
              } else if (typeof data === 'object') {
                if (data.error) {
                  this.addToast(data.error, 'danger');
                } else this.addToast("Erro desconhecido", 'danger');
                console.warn(data);
              } else document.write(data);
            }).catch(e => {
              const { error } = e.response.data;
              this.addToast(error || "Erro interno", 'danger');
            }).then(() => this.checkinOut = false);
          },
          addToast(message, type='info') {
            const uid = (Math.random()*100).toString(36);
            this.toasters.push({ uid,message,type });
            setTimeout(() => {
              const index = this.toasters.findIndex(i => i.uid === uid);
              if (index > -1) this.toasters.splice(index,1);
            }, 3000);
          }
        },
        created() {
          axios.get('https://loja.oesterp.com.br/categories?oesterp').then(response => {
            const data = response.data.sort((a,b) => a.weight - b.weight);
            data.forEach(c => c.products = c.products.sort((a,b) => a.price-b.price).map(p => {
              p.carousel = new Carousel(p.id, p.images);
              return p;
            }));
            this.categories = data;
            document.querySelector('body').style.opacity="1";

            for (let id of this.cart) {
              const product = this.findProduct(id);
              if (!product || !product.enabled || product.stock === 0) {
                this.cart.splice(this.cart.indexOf(id), 1);
              }
            }
          });
        }
      });

      Array.prototype.sum = function () {
        return this.reduce((prev,cur) => prev+cur, 0);
      }
    </script>
  -->
  </body>
</html>